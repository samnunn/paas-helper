<!DOCTYPE html>
<html>
<head>
    <title>PAAS Helper</title>
    <!-- <link rel="stylesheet" href="/pico.min.css" /> -->
    <link rel="stylesheet" href="/main.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <header>
        <div>
            <h1 id="site-title" class="mr-auto">PAAS Helper ðŸ¤–</h2>
            <a aria-disabled="true" deeplink="bossnet">BOSSNet</a>
            <a aria-disabled="true" deeplink="ereferrals">eReferrals</a>
            <a aria-disabled="true" deeplink="inteleconnect">IntelleConnect</a>
            <a aria-disabled="true" deeplink="nacs">NaCS</a>
            <button id="archive">Archive</button>
            <button id="render">Export</button>
        </div>
    </header>
    <main class="wrapped">
        <div class="hstack">
            <label>UMRN <input paas-autocaps type="text" name="" id="umrn" pattern="[A-Za-z]\d{7}" maxlength="8" spellcheck="false" autocapitalize="on" autocomplete="off" paas-parameter="biography-umrn"></label>
            <label>Name<input type="text" name="" id="" autocomplete="off" paas-parameter="biography-name"></label>
            <label>
                Mode
                <div class="selectbox">
                    <select name="" id="">
                        <option value="">Face-to-face</option>
                        <option value="">Telephone</option>
                    </select>

                </div>
            </label>
        </div>

        <div class="vstack">
            <div class="hstack">
                <label>Age<input type="number" name="" id="" paas-parameter="anthropometry-age"></label>
                <label>
                    Sex
                    <div class="selectbox">
                        <select name="" id="anthropometry-sex" paas-parameter="anthropometry-sex">
                            <option disabled selected value=""></option>
                            <option value="M">Male</option>
                            <option value="F">Female</option>
                        </select>
                    </div>
                </label>
                <label>Height (cm)<input type="number" step="0.1" id="height" paas-parameter="anthropometry-height"></label>
                <label>Weight (kg)<input type="number" step="0.1" id="weight" paas-parameter="anthropometry-weight"></label>
                <label>BMI<input type="text" placeholder="Auto-generated" name="" id="bmi" paas-parameter="anthropometry-bmi" readonly></label>
            </div>
        </div>

        <div class="hstack" style="grid-template-columns: 75% 1fr 1fr;">
            <label>
                Operation
                <input type="text" name="" id="" paas-parameter="biography-operation">
            </label>
            <label>
                Triage
                <div class="selectbox">
                    <select name="" id="" paas-parameter="biography-triage">
                        <option value="" disabled selected></option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select>
                </div>
            </label>
            <label>
                ASA
                <div class="selectbox">
                    <select name="" id="" paas-parameter="biography-asa">
                        <option value="" disabled selected></option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                    </select>
                </div>
            </label>
        </div>
        <div class="hstack">
            <div class="vstack optional-check-input">
                <h4>Systems Review</h4>
                <label><input type="checkbox" paas-parameter="se-cvd" tabindex=0>Cardiovascular Disease</label>
                <label><input type="checkbox" paas-parameter="se-resp" tabindex=0>Respiratory Disease</label>
                <label><input type="checkbox" paas-parameter="se-gord" tabindex=0>GORD</label>
                <label><input type="checkbox" paas-parameter="se-endo" tabindex=0>Endocrine Issues / Diabetes</label>
                <label><input type="checkbox" paas-parameter="se-gitrenal" tabindex=0>Hepatic / Renal Disease</label>
                <label><input type="checkbox" paas-parameter="se-cns" tabindex=0>CNS Disease</label>
                <label><input type="checkbox" paas-parameter="se-coagulation" tabindex=0>Coagulation problem</label>
                <label><input type="checkbox" paas-parameter="se-pain" tabindex=0>Chronic Pain / Opioids</label>
                <label><input type="checkbox" paas-parameter="se-alcohol" tabindex=0>Alcohol</label>
                <label><input type="checkbox" paas-parameter="se-smoking" tabindex=0 paas-sync-parameter="smoker" paas-sync-inverted>Smoking</label>
            </div>
            <div class="vstack">
                <h4>PMHx</h4>
                <textarea autocomplete="off" autocapitalize="off" spellcheck="false" name="history-pmhx" id="" paas-parameter="history-pmhx" class="bigbox fullheight" placeholder="- Itises
- Osises"></textarea>
            </div>
        </div>

        <div class="hstack">
            <label>
                <strong>Allergies</strong>
                <textarea autocomplete="off" autocapitalize="off" spellcheck="false" name="history-pmhx" id="" paas-parameter="history-allergies" class="bigbox"></textarea>
            </label>
            <label>
                <strong>Medications</strong>
                <textarea autocomplete="off" autocapitalize="off" spellcheck="false" name="history-pmhx" id="" paas-parameter="history-rx" class="bigbox"></textarea>
            </label>
        </div>

        <div class="hstack">
            <div class="vstack">
                <h4>Anaesthetic and Surgical History</h4>
                <label><input type="checkbox" tabindex=0 paas-parameter="history-prevanaes">Previous Anaesthesia</label>
                <label><input type="checkbox" tabindex=0 paas-parameter="history-anaesissues">Anaestheisa Issues</label>
                <label><input type="checkbox" tabindex=0 paas-parameter="history-anaesfhx">Family History</label>
                <label><input type="checkbox" tabindex=0 paas-parameter="history-mets">METSÂ >Â 4</label>
                <label><input type="checkbox" tabindex=0 paas-parameter="history-ponv" paas-sync-parameter="PONV">PONV</label>
                <label>
                    <!-- <h4>Previous Surgery</h4> -->
                    <textarea autocomplete="off" autocapitalize="off" spellcheck="false" name="history-pshx" id="" paas-parameter="history-pshx" class="bigbox fullheight" placeholder="- Ectomies
- Otomies
- Oscopies"></textarea>
                </label>
            </div>
            <div class="vstack sidebyside">
                <h4>Airway Assessment</h4>
                <label>
                    Mallampati
                    <div class="selectbox">
                        <select paas-parameter="airway-mallampati">
                            <option value="" disabled selected></option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </label>
                <label>
                    Mouth Opening (cm)
                    <input type="number" min="0" max="7" step="1" paas-parameter="airway-mouthopening">
                </label>
                <label>
                    Thyromental Distance
                    <input type="number" min="0" max="12" step="1" paas-parameter="airway-tmd">
                </label>
                <label>
                    Cervical ROM
                    <div class="selectbox">
                        <select paas-parameter="airway-neckrom">
                            <option value="" disabled selected></option>
                            <option value="Normal">Normal</option>
                            <option value="Mildly limited">Mildly limited</option>
                            <option value="Moderately limited">Moderately limited</option>
                            <option value="Severely limited">Severely limited</option>
                            <option value="Immobile">Immobile</option>
                        </select>
                    </div>
                </label>
                <label>
                    Beard
                    <div class="selectbox">
                        <select paas-parameter="airway-beard">
                            <option value="" disabled selected></option>
                            <option value="Yes, will trim">Yes, will trim</option>
                            <option value="Yes, won't trim">Yes, won't trim</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                </label>
                <label>
                    Jaw Protrusion
                    <div class="selectbox">
                        <select paas-parameter="airway-jaw">
                            <option value="" disabled selected></option>
                            <option value="A">A</option>
                            <option value="B">B</option>No
                            <option value="C">C</option>
                        </select>
                    </div>
                </label>
                <label>
                    Dentition
                    <input type="text" placeholder="One measly fang" paas-parameter="airway-dentition">
                </label>
            </div>
        </div>
        <div class="hstack">
            <div>
                <h4>Investigations</h4>
                <textarea autocomplete="off" autocapitalize="off" spellcheck="false" id="" paas-parameter="history-investigation" class="bigbox" placeholder="- Bloods
- ECG
- Echo
- PFTs"></textarea>
            </div>
            <div class="vstack">
                <h4>Consent</h4>
                <label><input type="checkbox" paas-parameter="consent-ga" tabindex=0>General anaesthesia</label>
                <label><input type="checkbox" paas-parameter="consent-sedation" tabindex=0>Sedation</label>
                <label><input type="checkbox" paas-parameter="consent-regional" tabindex=0>Regional</label>
                <label><input type="checkbox" paas-parameter="consent-neuraxial" tabindex=0>Neuraxial</label>
                <label><input type="checkbox" paas-parameter="consent-blood" tabindex=0>Blood products</label>
            </div>
        </div>

        <hr>

        <div class="hstack">
            <div class="risk-calculator">
                <h4>Apfel</h4>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="apfel" id="apfel-sex">Female</label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="apfel" paas-sync-parameter="smoker" checked>Non-smoker</label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="apfel" paas-sync-parameter="PONV">Prior PONV or motion sickness</label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="apfel">Postop opioids</label>
                <p paas-calculator-output="apfel" paas-parameter="score-apfel">0</p>
            </div>
            
            <div class="risk-calculator">
                <h4>STOP-BANG</h4>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="stopbang">Snorer</label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="stopbang">Tiredness</label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="stopbang">Observed apnoea</label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="stopbang">Hypertensive</label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="stopbang" id="stopbang-bmi">BMI > 35</label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="stopbang">Age > 50</label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="stopbang">Neck circumference â‰¥ 40cm</label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="stopbang" id="stopbang-sex">Male</label>
                <p paas-calculator-output="stopbang" paas-parameter="score-stopbang">0</p>
            </div>
        </div>
        
        <div class="hstack">
            <div class="risk-calculator">
                <h4>RCRI</h4>
                <label><input type="checkbox" tabindex=0 name="" paas-value="1" paas-calculator="rcri" id="">
                    <div class="">
                        <span>Elevated risk</span>
                        <aside><small>Intraperitoneal, intrathoracic, or suprainguinal vascular surgery</small></aside>
                    </div>
                </label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="rcri">IHD</label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="rcri">CCF</label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="rcri">CVA</label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="rcri">On insulin</label>
                <label><input type="checkbox" tabindex=0 paas-value="1" paas-calculator="rcri">Cr > 176.8 Âµmol/L</label>
                <p paas-calculator-output="rcri" paas-parameter="score-rcri">0</p>
            </div>
            
            <div class="risk-calculator">
                <h4>SORT Score</h4>
                <div class="vstack">
                    <input type="text" id=""  paas-parameter="score-sort">
                    <a href="http://www.sortsurgery.com/">External Link</a>
                </div>
            </div>
        </div>

        <h2>Output</h2>
        <div id="output"></div>
    </main>
    <script src="/main.js"></script>
    <script>
        // prevent accidental closure
        window.addEventListener('beforeunload', (e) => {
            if (location.hostname.search('localhost') != -1) {
                // e.preventDefault()
            }
        })

        // autocapitalise
        let autocapitalisedInputs = document.querySelectorAll('[paas-autocaps]')
        for (let a of autocapitalisedInputs) {
            a.addEventListener('input', (e) => {        
                let cursorPosition = e.target.selectionStart
                e.target.value = e.target.value.toUpperCase()
                e.target.selectionStart = cursorPosition
                e.target.selectionEnd = cursorPosition
            })
        }
    </script>
</body>
</html>